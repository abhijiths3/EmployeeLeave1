<div class="profile-wrapper" *ngIf="User; else loadingOrError">
  <h2>Employee Profile</h2>

  <!-- Personal Information -->
  <section class="profile-section" id="personal">
    <h3>ğŸ‘¤ Personal Information</h3>
    <div class="profile-block">
      <div><strong>Name:</strong> {{ User.EmployeeName }}</div>
      <div><strong>Phone:</strong> {{ User.Phone || 'N/A' }}</div>
      <div><strong>Age:</strong> {{ User.Age }}</div>
      <div><strong>Email:</strong> {{ User.Email }}</div>
      <div>
        <button (click)="toggleForm()" class="add-btn">Edit</button>
        <form [formGroup]="userForm" *ngIf="showForm">
          <label>Name: </label>
          <input formControlName="EmployeeName" type="text" placeholder="{{User.EmployeeName}}"/>

          <label>Age: </label>
          <input formControlName="Age" type="text" placeholder="{{User.Age}}" />

          <label>Email: </label>
          <input formControlName="Email" type="text" placeholder="{{User.Email}}" />

          <label>Phone: </label>
          <input formControlName="Phone" type="text" placeholder="{{User.Phone}}" />

          <button type="button" (click)="editProfile()">Save Changes</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Leave Summary -->
  <section class="profile-section" id="leave">
    <h3>ğŸŒ¿ Leave Summary</h3>
    <div class="profile-block">
      <div><strong>Leave Balance:</strong> {{ User.LeaveBalance ?? 'Not Available' }} Days</div>
    </div>
  </section>

  <!-- Company Info -->
  <section class="profile-section" id="company">
    <h3>ğŸ¢ Company Details</h3>
    <div class="profile-block">
      <div><strong>Department:</strong> {{ User.DepartmentName ?? 'Unassigned' }}</div>
      <div><strong>Manager:</strong> {{ User.ManagerName ?? 'N/A' }}</div>
    </div>
  </section>
</div>

<!-- Fallback UI -->
<ng-template #loadingOrError>
  <div *ngIf="isLoading" class="text-center mt-4">â³ Loading profile...</div>
  <div *ngIf="!isLoading && errormessage" class="alert alert-danger text-center mt-4">
    {{ errormessage }}
  </div>
</ng-template>
